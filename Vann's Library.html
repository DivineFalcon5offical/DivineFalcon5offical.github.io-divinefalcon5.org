<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Vann's Library ü©µü©∂üçüü™Ω</title>
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.min.js"></script>
      <style>
         :root {
         --pink: #ff66cc;
         --soft-blue: #add8e6;
         --gold: #d4af37;
         }
         body {
         margin: 0;
         font-family: 'Poppins', sans-serif;
         background: url('https://i.pinimg.com/originals/08/15/19/0815196ef6f207eab0bf34bd037bda74.gif') center/cover fixed;
         color: #fff;
         min-height: 100vh;
         overflow-x: hidden;
         }
         .header {
         background: rgba(173,216,230,0.8);
         padding: 30px;
         text-align: center;
         font-size: 2em;
         color: var(--pink);
         border-bottom: 6px solid #ff99ff;
         backdrop-filter: blur(8px);
         }
         .container {
         max-width: 1000px;
         margin: 20px auto;
         padding: 20px;
         background: rgba(255,255,255,0.1);
         border-radius: 30px;
         backdrop-filter: blur(12px);
         }
         /* Upload Section Styling */
         .upload-section {
         background: rgba(255,255,255,0.2);
         padding: 20px;
         border-radius: 20px;
         margin-bottom: 30px;
         text-align: center;
         }
         textarea {
         width: 90%;
         height: 150px;
         margin: 10px 0;
         border-radius: 10px;
         border: 2px solid var(--pink);
         padding: 10px;
         }
         /* Bookshelf Styling */
         .books-grid {
         display: grid;
         grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
         gap: 20px;
         }
         .book-card {
         background: #4a3728;
         border-radius: 10px;
         padding: 15px;
         text-align: center;
         cursor: pointer;
         border-left: 10px solid #36281e; /* Book Spine effect */
         transition: 0.3s;
         }
         .book-card:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--pink); }
         /* THE MAGICAL READER OVERLAY */
         #reader-overlay {
         display: none;
         position: fixed;
         top: 0; left: 0; width: 100%; height: 100%;
         background: rgba(0,0,0,0.9);
         z-index: 1000;
         justify-content: center;
         align-items: center;
         flex-direction: column;
         }
         #book-viewport {
         width: 800px;
         height: 600px;
         background: white;
         }
         .page {
         padding: 40px;
         background-color: #f5f5dc;
         color: #333;
         border: 1px solid #ddd;
         font-family: 'Georgia', serif;
         overflow: hidden;
         }
         .page-cover {
         background-color: #4a3728;
         color: var(--gold);
         display: flex;
         align-items: center;
         justify-content: center;
         font-size: 2em;
         text-align: center;
         }
         .close-btn {
         margin-top: 20px;
         padding: 10px 30px;
         background: var(--pink);
         color: white;
         border: none;
         border-radius: 20px;
         cursor: pointer;
         font-weight: bold;
         }
      </style>
   </head>
   <body>
      <div class="header">ü©µü©∂üçüü™Ω Vann's Library</div>
      <div class="container">
         <div class="upload-section">
            <h3>Write a New Story ‚ô°</h3>
            <input type="text" id="bookTitle" placeholder="Story Title..." style="width: 80%; padding: 10px; border-radius: 10px; border:none;">
            <textarea id="bookContent" placeholder="Separate pages with | (vertical bar). Example: Page 1 | Page 2 | Page 3"></textarea>
            <br>
            <button onclick="uploadBook()" style="padding: 10px 30px; background:var(--pink); border:none; color:white; border-radius:10px; cursor:pointer;">Add to Bookshelf</button>
         </div>
         <div class="books-grid" id="booksGrid">
         </div>
      </div>
      <div id="reader-overlay">
         <div id="book-viewport"></div>
         <button class="close-btn" onclick="closeBook()">Close Library Book</button>
      </div>
      <script>
         let pageFlip = null;
         
         // Load existing books
         function loadBooks() {
           const grid = document.getElementById('booksGrid');
           const books = JSON.parse(localStorage.getItem('vannsLibrary') || '[]');
           
           grid.innerHTML = '';
           books.forEach((book, index) => {
             const card = document.createElement('div');
             card.className = 'book-card';
             card.innerHTML = `<div style="font-size:3em;">üìñ</div><div class="book-title">${book.title}</div>`;
             card.onclick = () => openBook(index);
             grid.appendChild(card);
           });
         }
         
         // Save new book
         function uploadBook() {
           const title = document.getElementById('bookTitle').value;
           const content = document.getElementById('bookContent').value;
           if(!title || !content) return alert("Fill out the story! ‚ô°");
         
           const books = JSON.parse(localStorage.getItem('vannsLibrary') || '[]');
           // Split content by "|" to create pages
           const pages = content.split('|').map(p => p.trim());
           
           books.push({ title, pages });
           localStorage.setItem('vannsLibrary', JSON.stringify(books));
           
           document.getElementById('bookTitle').value = '';
           document.getElementById('bookContent').value = '';
           loadBooks();
         }
         
         // Open and Initialize the Flip Book
         function openBook(index) {
             const book = JSON.parse(localStorage.getItem('vannsLibrary'))[index];
             const viewport = document.getElementById('book-viewport');
             viewport.innerHTML = ''; // Clear old book
         
             // Create Cover
             const cover = document.createElement('div');
             cover.className = 'page page-cover';
             cover.innerHTML = `<div><h1>${book.title}</h1><p>By Vanessa</p></div>`;
             viewport.appendChild(cover);
         
             // Create Pages
             book.pages.forEach(text => {
                 const pg = document.createElement('div');
                 pg.className = 'page';
                 pg.innerHTML = `<p>${text}</p>`;
                 viewport.appendChild(pg);
             });
         
             // Show Overlay
             document.getElementById('reader-overlay').style.display = 'flex';
         
             // Start Flip Animation
             pageFlip = new St.PageFlip(viewport, {
                 width: 400,
                 height: 600,
                 showCover: true
             });
             pageFlip.loadFromHTML(document.querySelectorAll('.page'));
         }
         
         function closeBook() {
             document.getElementById('reader-overlay').style.display = 'none';
             if(pageFlip) pageFlip.destroy();
         }
         
         loadBooks();
      </script>
   </body>
</html>
